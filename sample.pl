#!/usr/bin/env perl
use v5.40;
use utf8;
use Win32::Unicode::Native;

# ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚°ãƒ©ãƒ : Win32::Unicode::Native ã®ä½¿ã„æ–¹

say "åƒ•ã¯ ğŸ’› perl";

# say "=== Win32::Unicode::Native ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚°ãƒ©ãƒ  ===";
# say "";

# # 1. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ“ä½œ
# say "1. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ“ä½œã®ãƒ†ã‚¹ãƒˆ";
# my $test_dir = "ãƒ†ã‚¹ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª";

# # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
# if (mkdir($test_dir)) {
#     say "âœ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¾ã—ãŸ: $test_dir";
# } else {
#     warn "âœ— ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆã«å¤±æ•—: " . error();
# }

# # 2. ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ
# say "";
# say "2. ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã®ãƒ†ã‚¹ãƒˆ";
# my $test_file = "$test_dir/æ—¥æœ¬èªãƒ•ã‚¡ã‚¤ãƒ«.txt";

# # ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¿
# if (open my $fh, '>', $test_file) {
#     say $fh "ã“ã‚“ã«ã¡ã¯ã€ä¸–ç•Œï¼";
#     say $fh "ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚";
#     say $fh "æ—¥æœ¬èªã®ãƒ•ã‚¡ã‚¤ãƒ«åã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æ‰±ãˆã¾ã™ã€‚";
#     close $fh;
#     say "âœ“ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸ: $test_file";
# } else {
#     warn "âœ— ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆã«å¤±æ•—: " . error();
# }

# # ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰èª­ã¿è¾¼ã¿
# say "";
# say "3. ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã®ãƒ†ã‚¹ãƒˆ";
# if (open my $fh, '<', $test_file) {
#     say "âœ“ ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹:";
#     while (my $line = <$fh>) {
#         print "  | $line";
#     }
#     close $fh;
# } else {
#     warn "âœ— ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã«å¤±æ•—: " . error();
# }

# # 4. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒªã‚¹ãƒˆ
# say "";
# say "4. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒªã‚¹ãƒˆã®ãƒ†ã‚¹ãƒˆ";
# if (opendir my $dh, $test_dir) {
#     say "âœ“ '$test_dir' ã®å†…å®¹:";
#     while (my $entry = readdir($dh)) {
#         next if $entry eq '.' or $entry eq '..';
#         say "  - $entry";
#     }
#     closedir $dh;
# } else {
#     warn "âœ— ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’é–‹ã‘ã¾ã›ã‚“: " . error();
# }

# # 5. ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±å–å¾—
# say "";
# say "5. ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±ã®ãƒ†ã‚¹ãƒˆ";
# my $size = file_size($test_file);
# say "âœ“ ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: $size ãƒã‚¤ãƒˆ";

# # 6. ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ”ãƒ¼
# say "";
# say "6. ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ”ãƒ¼ã®ãƒ†ã‚¹ãƒˆ";
# my $copy_file = "$test_dir/ã‚³ãƒ”ãƒ¼.txt";
# if (copy($test_file, $copy_file)) {
#     say "âœ“ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ: $copy_file";
# } else {
#     warn "âœ— ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ”ãƒ¼ã«å¤±æ•—: " . error();
# }

# # 7. ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å–å¾—
# say "";
# say "7. ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª";
# my $cwd = getcwd();
# say "âœ“ ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª: $cwd";

# # 8. ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ— (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
# say "";
# say "8. ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—";
# print "ä½œæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ (y/n): ";
# my $answer = <STDIN>;
# chomp $answer;

# if ($answer eq 'y' or $answer eq 'Y') {
#     unlink($test_file) or warn "ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤å¤±æ•—: " . error();
#     unlink($copy_file) or warn "ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤å¤±æ•—: " . error();
#     rmdir($test_dir) or warn "ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå‰Šé™¤å¤±æ•—: " . error();
#     say "âœ“ ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†";
# } else {
#     say "ãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ãã®ã¾ã¾æ®‹ã—ã¾ã™ã€‚";
# }

# say "";
# say "=== ãƒ—ãƒ­ã‚°ãƒ©ãƒ çµ‚äº† ===";
